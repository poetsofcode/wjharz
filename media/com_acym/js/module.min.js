var task,formName;function submitAcymForm(e,t,a){task=e,formName=t,a=void 0===a?"acySubmitSubForm":a;let l="acym-captcha";t&&(l=t+"-captcha");let r=document.querySelector("#"+l+'[class="acyg-recaptcha"][data-size="invisible"]');r&&(r.className="g-recaptcha");let s=document.querySelector("#"+l+'[class="g-recaptcha"][data-size="invisible"]');if(!s||"object"!=typeof grecaptcha)return window[a]();let n=s.getAttribute("grcID");return n||(n=grecaptcha.render(l,{sitekey:s.getAttribute("data-sitekey"),callback:a,size:"invisible","expired-callback":"resetRecaptcha"}),s.setAttribute("grcID",n)),grecaptcha.getResponse(n)?window[a]():(grecaptcha.execute(n),!1)}function resetRecaptcha(){let e="acym-captcha";formName&&(e=formName+"-captcha");let t=document.querySelector("#"+e+'[class="g-recaptcha"][data-size="invisible"]');if(!t)return;let a=t.getAttribute("grcID");grecaptcha.reset(a)}function acySubmitSubForm(){let e,t=document[formName],a=acymModule.emailRegex,l="";t.elements||(t=t[0].elements["user[email]"]&&t[0].elements["user[email]"].value&&a.test(t[0].elements["user[email]"].value)?t[0]:t[t.length-1]);let r=document.querySelectorAll("#"+formName+" .invalid");if(0!=r.length)for(e=0;e<r.length;e++)r[e].classList.remove("invalid");let s,n,i,c,m,u=t.elements["user[email]"];u.value!=acymModule.EMAILCAPTION&&(u.value=u.value.replace(/ /g,"")),u&&u.value!=acymModule.EMAILCAPTION&&a.test(u.value)||(l=acymModule.VALID_EMAIL,u.classList.add("invalid"));let d=document.querySelectorAll("#"+formName+' [type="radio"][data-required]');if(d.length>0){for(s="",n=0,e=0;e<d.length;e++)i=JSON.parse(d[e].getAttribute("data-required")),""!==s&&s!=d[e].getAttribute("name")&&0===n?(l+="\r\n"+(m=JSON.parse(d[e-1].getAttribute("data-required"))).message,acymAddInvalidClass(formName,s)):""!==s&&s!=d[e].getAttribute("name")&&n>0&&(n=0),d[e].checked&&n++,s=d[e].getAttribute("name");0===n&&(l+="\r\n"+i.message,acymAddInvalidClass(formName,s))}let o=document.querySelectorAll("#"+formName+' [type="checkbox"][data-required]');if(o.length>0){for(s="",n=0,e=0;e<o.length;e++)i=JSON.parse(o[e].getAttribute("data-required")),""!==s&&s!=o[e].getAttribute("name").slice(0,o[e].getAttribute("name").lastIndexOf("["))&&0===n?(l+="\r\n"+(m=JSON.parse(o[e-1].getAttribute("data-required"))).message,acymAddInvalidClass(formName,s)):""!==s&&s!=o[e].getAttribute("name").slice(0,o[e].getAttribute("name").lastIndexOf("["))&&n>0&&(n=0),o[e].checked&&n++,s=o[e].getAttribute("name").slice(0,o[e].getAttribute("name").lastIndexOf("["));0===n&&(l+="\r\n"+i.message,acymAddInvalidClass(formName,s))}let g=document.querySelectorAll("#"+formName+' [acym-field-type="date"][data-required]');if(0!=g.length){let t;for(s="",n=0,e=0;e<g.length;e++)t=g[e],i=JSON.parse(t.getAttribute("data-required")),""!==s&&s!=t.getAttribute("name").slice(0,t.getAttribute("name").lastIndexOf("["))&&n<3?(n=0,l+="\r\n"+(m=JSON.parse(g[e-1].getAttribute("data-required"))).message):""!==s&&s!=t.getAttribute("name").slice(0,t.getAttribute("name").lastIndexOf("["))&&n>0&&(n=0),""!=t.value?n++:t.classList.add("invalid"),s=g[e].getAttribute("name").slice(0,g[e].getAttribute("name").lastIndexOf("["));n<3&&(l+="\r\n"+i.message)}let f=document.querySelectorAll("#"+formName+' [data-required]:not([type="checkbox"]):not([type="radio"]):not([acym-field-type="date"])');if(f.length>0)for(e=0;e<f.length;e++)i=JSON.parse(f[e].getAttribute("data-required")),-1===["text","textarea","single_dropdown","multiple_dropdown","phone"].indexOf(i.type)||""!==f[e].value&&"0"!=f[e].value||(l+="\r\n"+i.message,f[e].classList.add("invalid")),"file"===i.type&&0===f[e].files.length&&(l+="\r\n"+i.message,f[e].classList.add("invalid"));let y=document.querySelectorAll("#"+formName+" [data-authorized-content]");if(y.length>0)for(e=0;e<y.length;e++){let t=acym_helper.parseJson(y[e].getAttribute("data-authorized-content"));c="","number"===t[0]?c=/^[0-9]+$/:"letters"===t[0]?c=/^[a-zA-Z]+$/:"numbers_letters"===t[0]?c=/^[a-zA-Z0-9]+$/:"regex"===t[0]&&(c=new RegExp(t.regex)),""===c||c.test(y[e].value)||(y[e].classList.add("invalid"),l+="\r\n"+t.message)}if(l.length>0)return alert(l),!1;if(t.elements.hiddenlists.value.length<1){let e=!1,a=t.elements["subscription[]"];if(a&&(void 0===a.value||0===a.value.length)){for(b=0;b<a.length;b++)a[b].checked&&(e=!0);if(!e)return alert(acymModule.NO_LIST_SELECTED),!1}}if("unsubscribe"!==task){let e=t.elements.terms;if(e&&!e.checked)return"undefined"!=typeof acymModule&&alert(acymModule.ACCEPT_TERMS),!1;if("undefined"!=typeof acymModule&&void 0!==acymModule["excludeValues"+formName])for(let e in acymModule["excludeValues"+formName])acymModule["excludeValues"+formName].hasOwnProperty(e)&&t.elements["user["+e+"]"]&&t.elements["user["+e+"]"].value==acymModule["excludeValues"+formName][e]&&(t.elements["user["+e+"]"].value="")}if("undefined"!=typeof ga){ga("send","pageview","unsubscribe"===task?"unsubscribe":"subscribe")}if(taskField=t.task,taskField.value=task,!t.elements.ajax||!t.elements.ajax.value||"0"==t.elements.ajax.value)return t.submit(),!1;let p=document.getElementById(formName),A=new FormData(p);p.className+=" acym_module_loading",p.style.filter="alpha(opacity=50)",p.style.opacity="0.5";let h=document.querySelectorAll(".responseContainer.acym_module_error.message_"+formName);Array.prototype.forEach.call(h,function(e){e.parentNode.removeChild(e)});let v=new XMLHttpRequest;return v.open("POST",p.action),v.onload=function(){let e="Ajax Request Failure",t="error";if(200===v.status){let a=JSON.parse(v.responseText);e=a.message,t=a.type}acymDisplayAjaxResponse(decodeURIComponent(e),t,formName)},v.send(A),!1}function acymAddInvalidClass(e,t){let a=document.querySelectorAll("#"+e+' [name^="'+t+'"]');for(let e=0;e<a.length;e++)a[e].classList.add("invalid");return!0}function acymDisplayAjaxResponse(e,t,a,l){let r=document.createElement("div"),s=document.getElementById("acym_fulldiv_"+a);s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.className="responseContainer";let n=document.getElementById(a),i=n.className,c="acym_module_loading",m=i.replace(" "+c,"",i);m==i&&(m=i.replace(c+" ","",i)),m==i&&(m=i.replace(c,"",i)),n.className=m,r.innerHTML=e,"success"==t?r.className+=" acym_module_success":(r.className+=" acym_module_error",n.style.opacity="1"),(l||"success"==t)&&(n.style.display="none"),r.className+=" message_"+a,r.className+=" slide_open"}