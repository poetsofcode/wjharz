jQuery(document).on("acym_plugins_installed_loaded",function(){let e=[];jQuery("[acym-data-plugins-id]").on("open.zf.reveal",function(){let t=jQuery(this);if(void 0!==e[t.attr("acym-data-plugins-id")])return;let i=t.attr("acym-data-plugin-folder");Vue.component("vue-prism-editor",VuePrismEditor),e[t.attr("acym-data-plugins-id")]=new Vue({el:"#"+t.attr("acym-data-plugins-id"),data:()=>({language:"html",code:"",saving:!1,saved:!1,messageSaved:"",deleting:!1,deleted:!1,messageDeleted:""}),mounted(){let e=ACYM_AJAX_URL+"&ctrl=plugins&task=getCustomViewPlugin&plugin="+i;jQuery.get(e,e=>{if(void 0!==(e=acym_helper.parseJson(e)).error)return acym_helperNotification.addNotification(e.error,"error"),t.foundation("close"),!1;this.code=e.content})},methods:{save(){this.saving=!0;let e=ACYM_AJAX_URL+"&ctrl=plugins&task=saveCustomViewPlugin&plugin="+i;jQuery.post(e,{custom_view:encodeURIComponent(this.code)},e=>{if(void 0!==(e=acym_helper.parseJson(e)).error)return acym_helperNotification.addNotification(e.error,"error"),t.foundation("close"),!1;this.saving=!1,this.messageSaved=e.message,this.saved=!0,setTimeout(()=>{this.saved=!1},2e3)})},resetView(){if(!confirm(ACYM_JS_TXT.ACYM_RESET_VIEW_CONFIRM))return;this.deleting=!0;let e=ACYM_AJAX_URL+"&ctrl=plugins&task=deleteCustomViewPlugin&plugin="+i;jQuery.get(e,e=>{if(void 0!==(e=acym_helper.parseJson(e)).error)return acym_helperNotification.addNotification(e.error,"error"),t.foundation("close"),!1;this.code=e.content,this.deleting=!1,this.messageDeleted=e.message,this.deleted=!0,setTimeout(()=>{this.deleted=!1},2e3)})}}})})});